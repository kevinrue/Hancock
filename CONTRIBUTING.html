<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Contributing • hancock</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>



<meta property="og:title" content="Contributing" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hancock</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/hancock.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/concepts.html">Concepts on cell types and signatures</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kevinrue/hancock">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Contributing</h1>
    </div>

<div id="contributing" class="section level1">

<div id="considerate-contributions-are-very-welcome" class="section level2">
<h2 class="hasAnchor">
<a href="#considerate-contributions-are-very-welcome" class="anchor"></a>Considerate contributions are very welcome!</h2>
<p>Here are a few guidelines to help develop and maintain a consistent coding style.</p>
</div>
<div id="table-of-contents" class="section level2">
<h2 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of contents</h2>
<ul>
<li><a href="#primary-objectives">Primary objectives</a></li>
<li><a href="#proof-of-concepts">Proof of concepts</a></li>
<li><a href="#coding-style">Coding style</a></li>
<li><a href="#unit-tests-and-code-coverage">Unit tests and code coverage</a></li>
<li><a href="#internal-functions">Internal functions</a></li>
<li><a href="#new-prediction-methods">New prediction methods</a></li>
<li><a href="#new-plotting-functions">New plotting functions</a></li>
<li><a href="#new-learning-methods">New learning methods</a></li>
<li><a href="#terminology">Terminology</a></li>
</ul>
</div>
<div id="primary-objectives" class="section level2">
<h2 class="hasAnchor">
<a href="#primary-objectives" class="anchor"></a>Primary objectives</h2>
<p>Most importantly, contributions should directly contribute to the primary objectives of the package, namely:</p>
<ol>
<li>Apply signatures to assign cell identities to new data sets</li>
<li>Learn new signatures from data sets, in a format compatible with (1.)</li>
</ol>
<p>Existing methods implemented in other <em>R</em> packages are welcome. Those should be handled as described in the <a href="#new-prediction-methods">New prediction methods</a> section and unit tested as described in the <a href="#unit-tests-and-code-coverage">Unit tests and code coverage</a> section.</p>
</div>
<div id="proof-of-concepts" class="section level2">
<h2 class="hasAnchor">
<a href="#proof-of-concepts" class="anchor"></a>Proof of concepts</h2>
<p>Ideally, a proof-of-concept Rmarkdown notebook should demonstrate the method <em>before</em> adding any new function in <code>hancock</code> (i.e., explicitly declaring any new function in the notebook itself).</p>
<p>This can save significant time through community feedback and suggestions from both expert developers and prospective users on the implementation and expected usage of a new functionality <em>before</em> investing significant time and effort into packaging and documenting functions.</p>
<p>For an example, please refer to the proof-of-concept of the function <code>predictByProportionPositive</code> available <a href="https://github.com/kevinrue/hancock2018/blob/3e065aca67071338b1fcf496790da239ace5425c/1-proportion_signature.Rmd">here</a>.</p>
<p>Proof-of-concept vignettes may be subsequently updated to demonstrate the same use case, but calling functions implemented in the package. Refer to the demonstration of the function <code>learnMarkersByPositiveProportionDifference</code> available <a href="https://github.com/kevinrue/hancock2018/blob/f08ee1d34c6bea722757870a339ad3940a48040c/2-learn-signatures.Rmd">here</a>.</p>
</div>
<div id="coding-style" class="section level2">
<h2 class="hasAnchor">
<a href="#coding-style" class="anchor"></a>Coding style</h2>
<p>This package adheres to the <em>Bioconductor</em> coding style (<a href="https://bioconductor.org/developers/how-to/coding-style/" class="uri">https://bioconductor.org/developers/how-to/coding-style/</a>).</p>
<p>Please use common <em>Bioconductor</em> methods and classes, in particular <code>SummarizedExperiment</code> and <code>GeneSetCollection</code>. Note that new data structures for gene sets and signatures are under active development. Those include:</p>
<ul>
<li>
<code>BaseSets</code> (<a href="https://github.com/kevinrue/unisets"><em>unisets</em></a> package)</li>
<li>
<code>tbl_geneset</code> (<a href="https://github.com/Kayla-Morrell/GeneSet"><em>GeneSet</em></a> package)</li>
</ul>
<p>More details are available at <a href="https://bioconductor.org/developers/how-to/commonMethodsAndClasses/" class="uri">https://bioconductor.org/developers/how-to/commonMethodsAndClasses/</a>.</p>
</div>
<div id="unit-tests-and-code-coverage" class="section level2">
<h2 class="hasAnchor">
<a href="#unit-tests-and-code-coverage" class="anchor"></a>Unit tests and code coverage</h2>
<p>Code coverage should remain at 100%. Every function, both internal and exported, should be accompanied with its own unit test(s) as part of the <em>same</em> pull request.</p>
<p>A single unit test may include multiple <code>expect_*</code> assertions. Use as many <code>expect_*</code> as appropriate.</p>
<p>Note that large functions that include several <code>if</code> statements and require multiple unit tests to cover every scenario can generally be refactored in multiple smaller functions easier to unit test individually.</p>
<p>The following code is useful to track down lines that are not covered by unit tests:</p>
<pre><code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(covr)
pc &lt;- package_coverage()
report(pc)</a></code></pre>
</div>
<div id="news-file" class="section level2">
<h2 class="hasAnchor">
<a href="#news-file" class="anchor"></a>NEWS file</h2>
<p>Until the package is made available through the <a href="https://bioconductor.org"><em>Bioconductor</em></a> project, all new features should be described under the “hancock 0.99.0” section, as part of the <em>same</em> pull request. This will produce a manifest of functionality to accompany the initial submission to the <em>Bioconductor</em> project.</p>
</div>
<div id="internal-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#internal-functions" class="anchor"></a>Internal functions</h2>
<p>Internal functions should also be documented using roxygen comments (<a href="http://r-pkgs.had.co.nz/man.html" class="uri">http://r-pkgs.had.co.nz/man.html</a>) using Markdown formatting (<a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/markdown.html" class="uri">https://cran.r-project.org/web/packages/roxygen2/vignettes/markdown.html</a>). However, those do not have to be as comprehensive as exported functions. Required sections are:</p>
<ul>
<li><code>@title</code></li>
<li><code>@description</code></li>
<li><code>@param</code></li>
<li><code>@return</code></li>
<li>
<code>@rdname INTERNAL_&lt;...&gt;</code> with <code>&lt;...&gt;</code> being the name of the function (without any trailing “.”). Make sure that your <code>.gitignore</code> contains the entry <code>INTERNAL_*</code>. Do <em>not</em> push INTERNAL documentation online.</li>
<li><code>@author</code></li>
</ul>
</div>
<div id="new-prediction-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#new-prediction-methods" class="anchor"></a>New prediction methods</h2>
<p>New prediction methods should be first implemented as a separate functions, individually exported in the <code>NAMESPACE</code> file. All prediction methods must accept <code>object</code> and <code>se</code> as their first two arguments, respectively:</p>
<ol>
<li>the <code>GeneSetCollection</code>, <code>BaseSets</code>, or <code>tbl_geneset</code>
</li>
<li>the <code>SummarizedExperiment</code>
</li>
</ol>
<p>Additional, method-specific parameters may be accepted from the third argument onward.</p>
<p>Once implemented as its own function, a new method should be made available through the <a href="https://github.com/kevinrue/hancock/blob/c70f7a86026e2ec1d6d54b1d6d732d2a07320c89/R/predict-methods.R#L114"><code>.predictAnyGeneSetClass</code></a> function using a unique <code>method</code> identifier. Make sure the new identifier and method are documented in the <code>?predictSignatures</code> man page.</p>
<p>Prediction methods should return the input <code>SummarizedExperiment</code> object updated as follows:</p>
<ul>
<li>In the <code>colData</code> slot, a <code>DataFrame</code> nested in a new (or updated) <code>"hancock"</code> column should contain at least a first column called <code>prediction</code>. This column should be populated with the highest-confidence prediction for each sample. Additional, method-specific columns may be present from the second column onward.</li>
<li>In the <code>metadata</code> slot, a <code>list</code> in a new (or updated) <code>"hancock"</code> element, should contain at least the following elements:
<ul>
<li>
<code>"GeneSets"</code>: the object of class <code>GeneSetCollection</code>, <code>BaseSets</code>, or <code>tbl_geneset</code> containing the signatures used to make the predictions.</li>
<li>
<code>"method"</code>: Identifier of the method used to make the predictions</li>
<li>
<code>"packageVersion"</code>: Version of the <code>hancock</code> package used to make the predictions</li>
<li>Additional, method-specific elements may appear <em>after</em> the above general metadata</li>
</ul>
</li>
</ul>
<p>For an example template, please refer to the prediction method <a href="https://github.com/kevinrue/hancock/blob/e7e7f18fb82f59240078533de0c42545485acf9b/R/predict-methods.R#L176"><code>predictByProportionPositive</code></a>, made available using the <a href="https://github.com/kevinrue/hancock/blob/e7e7f18fb82f59240078533de0c42545485acf9b/R/predict-methods.R#L95"><code>"ProportionPositive"</code> or <code>"PP"</code></a> identifiers.</p>
</div>
<div id="new-plotting-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-plotting-functions" class="anchor"></a>New plotting functions</h2>
<p>New plotting functions should accept <code>se</code> as their first argument, namely a <code>SummarizedExperiment</code> returned by any prediction method (see above).</p>
<p>Most importantly, plotting function should first check that the input <code>se</code> object contains the results of the associated prediction method(s). In the future, this requirement may be deprecated by the definition of <code>SummarizedExperiment</code> subclasses, “flagging” the presence of specific prediction results.</p>
<p>Plotting functions should return a minimal <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot2::ggplot</a></code> or <code><a href="https://www.rdocumentation.org/packages/ComplexHeatmap/topics/Heatmap">ComplexHeatmap::Heatmap</a></code> object, giving users maximal freedom to customize the plot.</p>
<p>For an example, please refer to <a href="https://github.com/kevinrue/hancock/blob/e7e7f18fb82f59240078533de0c42545485acf9b/R/plot-methods.R#L11"><code>plotProportionPositive</code></a>, using the result of the <a href="https://github.com/kevinrue/hancock/blob/e7e7f18fb82f59240078533de0c42545485acf9b/R/predict-methods.R#L176"><code>"ProportionPositive"</code> or <code>"PP"</code></a> method.</p>
</div>
<div id="new-learning-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#new-learning-methods" class="anchor"></a>New learning methods</h2>
<p>Similarly to <a href="#new-prediction-methods">new prediction methods</a>, new learning methods should be first implemented as a separate functions, individually exported in the <code>NAMESPACE</code> file. All prediction methods must accept <code>se</code> as their first argument, namely the <code>SummarizedExperiment</code> from which to learn signatures. Additional method-specific parameters may be accepted from the second argument onward.</p>
<p>Once implemented as its own function, a new method should be made available through the <a href="https://github.com/kevinrue/hancock/blob/c70f7a86026e2ec1d6d54b1d6d732d2a07320c89/R/learn-methods.R#L49"><code>learnSignatures</code></a> method using a unique <code>method</code> identifier. Make sure the new identifier and method are documented in the <code><a href="reference/learnSignatures.html">?learnSignatures</a></code> man page.</p>
<p>Learning methods should return an object inheriting from the <code>BaseSets</code> class, defined in the <a href="https://github.com/kevinrue/unisets"><em>unisets</em></a> package.</p>
<p>For an example template, please refer to the prediction method <a href="https://github.com/kevinrue/hancock/blob/master/R/learn-methods.R#L114"><code>learnMarkersByPositiveProportionDifference</code></a>, made available using the <a href="https://github.com/kevinrue/hancock/blob/master/R/learn-methods.R#L54"><code>"PositiveProportionDifference"</code> or <code>"PPD"</code></a> identifiers.</p>
<p>Metadata produced by learning methods may be stored as <a href="https://github.com/kevinrue/hancock/blob/master/R/learn-methods.R#L188">additional columns</a> of the <code>BaseSets</code> returned.</p>
</div>
<div id="terminology" class="section level2">
<h2 class="hasAnchor">
<a href="#terminology" class="anchor"></a>Terminology</h2>
<p>Until the <a href="https://www.ebi.ac.uk/ols/ontologies/cl">Cell Ontology</a> or <a href="https://www.humancellatlas.org">Human Cell Atlas</a> come up with some reference terminology, avoid the use of “cell type” and “(sub-)<sub>n</sub>types” in the code and accompanying documentation. Those terms are increasingly confusing and open for interpretation as single-cell technologies continuously advance our understanding of <em>cell differentiation</em> into functionally distinct <em>cell populations</em> or <em>compartments</em> currently discriminated by their respective canonical set of <em>cell surface proteins</em> and <em>transcriptional profiles</em> (a few examples of terms that more specifically address individual aspects of the definition of “cell types”).</p>
</div>
</div>

  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kevin Rue-Albrecht, Robert Amezquita, Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

